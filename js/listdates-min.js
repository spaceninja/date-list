"use strict";var datelistContent=document.getElementById("datelist-content"),datelistError=document.getElementById("datelist-error"),sortButtons=Array.from(document.querySelectorAll("[data-sort-by]")),xhr=new XMLHttpRequest,dates=void 0,sortByKey=function t(e,r){return e.sort(function(t,e){var n=t[r],o=e[r];return"string"==typeof n&&(n=n.toLowerCase()),"string"==typeof o&&(o=o.toLowerCase()),n<o?-1:n>o?1:0})},parseDates=function t(e){for(var r=0;r<e.length;r++){var n=moment(e[r].date),o=n.diff(moment(),"milliseconds"),a=moment.duration(1,"months"),s=n.fromNow(),d=humanizeDuration(o,{largest:2,round:!0});o<0?d+=" ago":d="in "+d,Math.abs(o)<a?e[r].duration=s:e[r].duration=d,e[r].calendar=n.calendar(null,{sameElse:"ll"}),e[r].month=n.calendar(null,{sameElse:"L"}),e[r].diff=o}return e},buildHTML=function t(e){for(var r="",n=0;n<e.length;n++)r+="<tr><td>"+e[n].event+"</td><td class='num'>"+e[n].calendar+"</td><td class='num'>"+e[n].duration+"</td></tr>";return r},sortBy=function t(){var e=sortByKey(dates,this.dataset.sortBy);datelistContent.innerHTML=buildHTML(e)},enableSorting=function t(e){e.addEventListener("click",sortBy)};sortButtons.forEach(enableSorting),xhr.open("GET","data/dates.json",!0),xhr.onload=function(){if(xhr.status>=200&&xhr.status<400)dates=parseDates(JSON.parse(xhr.responseText)),datelistContent.innerHTML=buildHTML(dates);else{datelistError.innerHTML="Whoops! Something went wrong. Please try again."}},xhr.onerror=function(){datelistError.innerHTML="Whoops! We couldn't reach the server. Please try again."},xhr.send();