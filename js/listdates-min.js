var datelistContent=document.getElementById("datelist-content"),datelistError=document.getElementById("datelist-error"),initialSortButton=document.getElementById("btn-sort-duration"),sortButtons=document.querySelectorAll("[data-sort-by]"),sortButtonsArray=Array.from(sortButtons),xhr=new XMLHttpRequest,dates=void 0,sortByKey=function(){function t(t,e){return t.sort(function(t,r){var n=t[e],s=r[e];return"string"==typeof n&&(n=n.toLowerCase()),"string"==typeof s&&(s=s.toLowerCase()),n<s?-1:n>s?1:0})}return t}(),parseDates=function(){function t(t){for(var e=t,r=0;r<e.length;r+=1){var n=moment(e[r].date),s=n.diff(moment(),"milliseconds"),o=moment.duration(1,"months"),a=n.fromNow(),i=humanizeDuration(s,{largest:2,round:!0});i=s<0?String(i)+" ago":"in "+String(i),Math.abs(s)<o?e[r].duration=a:e[r].duration=i,e[r].calendar=n.calendar(null,{sameElse:"ll"}),e[r].month=n.calendar(null,{sameElse:"L"}),e[r].diff=s}return e}return t}(),buildHTML=function(){function t(t){for(var e="",r=0;r<t.length;r+=1)e+="<tr><td>"+String(t[r].event)+'</td><td class="num">'+String(t[r].calendar)+'</td><td class="num">'+String(t[r].duration)+"</td></tr>";return e}return t}(),sortBy=function(){function t(){sortByKey(dates,this.dataset.sortBy),"true"===this.dataset.sortActive?"ascending"===this.dataset.sortOrder?(datelistContent.innerHTML=buildHTML(dates.reverse()),this.dataset.sortOrder="descending"):(datelistContent.innerHTML=buildHTML(dates),this.dataset.sortOrder="ascending"):(sortButtonsArray.forEach(function(t){t.dataset.sortActive="false"}),datelistContent.innerHTML=buildHTML(dates),this.dataset.sortActive="true",this.dataset.sortOrder="ascending")}return t}();sortButtonsArray.forEach(function(t){t.addEventListener("click",sortBy)}),xhr.open("GET","data/dates.json",!0),xhr.onload=function(){function t(){if(xhr.status>=200&&xhr.status<400)dates=parseDates(JSON.parse(xhr.responseText)),sortByKey(dates,initialSortButton.dataset.sortBy),datelistContent.innerHTML=buildHTML(dates.reverse()),initialSortButton.dataset.sortOrder="descending",initialSortButton.dataset.sortActive="true";else{datelistError.innerHTML="Whoops! Something went wrong. Please try again."}}return t}(),xhr.onerror=function(){function t(){datelistError.innerHTML="Whoops! We couldn't reach the server. Please try again."}return t}(),xhr.send();