var datelistContent=document.getElementById("datelist-content"),datelistError=document.getElementById("datelist-error"),sortButtons=Array.from(document.querySelectorAll("[data-sort-by]")),xhr=new XMLHttpRequest,dates=void 0,sortByKey=function(){function t(t,n){return t.sort(function(t,r){var e=t[n],o=r[n];return"string"==typeof e&&(e=e.toLowerCase()),"string"==typeof o&&(o=o.toLowerCase()),e<o?-1:e>o?1:0})}return t}(),parseDates=function(){function t(t){for(var n=t,r=0;r<n.length;r+=1){var e=moment(n[r].date),o=e.diff(moment(),"milliseconds"),a=moment.duration(1,"months"),s=e.fromNow(),i=humanizeDuration(o,{largest:2,round:!0});i=o<0?String(i)+" ago":"in "+String(i),Math.abs(o)<a?n[r].duration=s:n[r].duration=i,n[r].calendar=e.calendar(null,{sameElse:"ll"}),n[r].month=e.calendar(null,{sameElse:"L"}),n[r].diff=o}return n}return t}(),buildHTML=function(){function t(t){for(var n="",r=0;r<t.length;r+=1)n+="<tr><td>"+String(t[r].event)+'</td><td class="num">'+String(t[r].calendar)+'</td><td class="num">'+String(t[r].duration)+"</td></tr>";return n}return t}(),sortBy=function(){function t(){var t=sortByKey(dates,this.dataset.sortBy);datelistContent.innerHTML=buildHTML(t)}return t}(),enableSorting=function(){function t(t){t.addEventListener("click",sortBy)}return t}();sortButtons.forEach(enableSorting),xhr.open("GET","data/dates.json",!0),xhr.onload=function(){function t(){if(xhr.status>=200&&xhr.status<400)dates=parseDates(JSON.parse(xhr.responseText)),datelistContent.innerHTML=buildHTML(dates);else{datelistError.innerHTML="Whoops! Something went wrong. Please try again."}}return t}(),xhr.onerror=function(){function t(){datelistError.innerHTML="Whoops! We couldn't reach the server. Please try again."}return t}(),xhr.send();